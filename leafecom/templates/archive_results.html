<%inherit file="/main_template.html"/>
<%page cached="False"/>
<%def name="extraCSS()"/>
<%def name="extraJS()"/>
<%def name="title()">Search Results</%def>

<%def name="body()">
	<div>
		<p>Query time: ${c.elapsed} seconds</p>
	</div>
  <div>
% if not len(c.paginator):
	<div>
	  <h3 style="color: darkred">No results were found. Please <a href="/archives/search/${c.listname}">try again<a>.</h3>
	</div>
% endif

% if len(c.paginator):
	<div>
		<p>${ c.paginator.pager("$link_first $link_previous <span class='pager_count_custom'>$first_item</span> to <span class='pager_count_custom'>$last_item</span> of <span class='pager_count_custom'>$item_count</span> $link_next $link_last") }</p>
	</div>
	<div>
	<table border="0">
		<tr>
			<th class="rcell">#</th>
			<th></th>
			<th class="lcell" style="text-decoration: underline;">Subject, Author, Date Posted</th>
		</tr>
	% for num, msg in enumerate(c.paginator):
		<tr class="archiveSearchRow">
			<td class="rcell">${num + c.firstMsgOffset + 1}.</td>
			<td></td>
			<td class="lcell"><a href="/archives/msg/${msg.imsg}">${msg.csubject}</a><br>
			<%
				author = msg.cfrom
				addStart = author.find("<")
				if addStart > -1:
					author = author[:addStart-1]
				# Remove any quotes author the name
				author = author.replace('"', '').strip()
				date = msg.tposted.strftime("%Y.%m.%d")
				time = msg.tposted.strftime("%H:%M:%S")
			%>
			<span class="authorPosting">Author: <b>${author}</b> Posted at: <b>${date}</b> ${time}</span>
			</td>
			</span>
		</tr>
	% endfor
	</table>
	<div style="margin-top: 60px;">
	<a href="/archives/search/${c.listname}">New Query</a>
	</div>

% endif
</div>

</%def>
